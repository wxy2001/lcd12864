C51 COMPILER V9.57.0.0   INTERFACE                                                         07/02/2022 17:38:09 PAGE 1   


C51 COMPILER V9.57.0.0, COMPILATION OF MODULE INTERFACE
OBJECT MODULE PLACED IN .\OutPut\interface.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE Source\other\interface.c LARGE OPTIMIZE(8,SIZE) BROWSE DEBUG OBJECTEXTEN
                    -D PRINT(.\OutPut\interface.lst) TABS(2) OBJECT(.\OutPut\interface.obj)

line level    source

   1          #include <IAP15W4K61S4.h>
   2          #include <stdio.h>
   3          #define uint  unsigned int
   4          typedef unsigned char uChar8;
   5          
   6          /**************************************¶¨ÒåÈ«¾Ö±äÁ¿*******************************************************
             -****************/ 
   7          
   8          uChar8 code start[] =  //¿ªÊ¼½çÃæ
   9          {
  10          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  11          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  12          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  13          0x04,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  14          0x04,0x26,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  15          0x04,0x42,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  16          0x1E,0xDF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  17          0x05,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  18          0x04,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  19          0x04,0x5F,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  20          0x06,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  21          0x0C,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  22          0x74,0x5F,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  23          0x04,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  24          0x04,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  25          0x14,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  26          0x0C,0x44,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x0C,0xDF,0x80,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  28          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  30          0x00,0x03,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0xBE,0x67,0x3E,0x00,
  31          0x00,0x03,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x08,0x94,0x88,0x00,
  32          0x00,0x03,0xC0,0x00,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x04,0x08,0x94,0x88,0x00,
  33          0x00,0x03,0xC0,0x00,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x88,0x97,0x08,0x00,
  34          0x00,0x03,0x60,0x01,0xB0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0xF4,0x88,0x00,
  35          0x00,0x03,0x30,0x03,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x88,0x94,0x88,0x00,
  36          0x00,0x03,0x18,0x0E,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x88,0x94,0x88,0x00,
  37          0x00,0x03,0x0F,0xFC,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  38          0x00,0x03,0x0F,0xF8,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  39          0x00,0x03,0x0C,0x18,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  40          0x00,0x03,0x0C,0x18,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  41          0x00,0x03,0x0C,0x18,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  42          0x00,0x03,0x0F,0xF8,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  43          0x00,0x03,0x0F,0xFC,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  44          0x00,0x03,0x18,0x06,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  45          0x00,0x03,0x30,0x03,0xB0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  46          0x00,0x03,0x60,0x00,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  47          0x00,0x03,0xC0,0x00,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  48          0x00,0x03,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  49          0x00,0x03,0xFF,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  50          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  51          0x00,0x00,0x00,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  52          0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x3C,0x00,0x00,
  53          0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x20,0x00,0x00,
C51 COMPILER V9.57.0.0   INTERFACE                                                         07/02/2022 17:38:09 PAGE 2   

  54          0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x20,0x00,0x00,
  55          0x00,0x00,0x00,0x00,0x00,0x0C,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x3C,0x00,0x00,
  56          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x09,0x04,0x00,0x00,
  57          0x00,0x00,0x00,0x00,0x07,0xFF,0xF0,0x00,0x00,0x00,0x00,0x00,0x09,0x04,0x00,0x00,
  58          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x0F,0x3C,0x00,0x00,
  59          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  60          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  61          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  62          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  63          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  64          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  65          0x00,0x00,0x00,0x00,0x00,0x08,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  66          0x00,0x00,0x00,0x00,0x00,0x28,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  67          0x00,0x00,0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  68          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  69          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  70          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  71          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  72          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  73          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  74          };
  75          
  76          /**************************************¶¨ÒåÍâ²¿º¯Êý½Ó¿Ú***************************************************
             -*********************/
  77          extern void LCD12864ShowString(uChar8 x, uChar8 y, uChar8* str);  //ÏÔÊ¾×Ö·û´®
  78          extern void LCD12864WriteCommand(uChar8 command);                 //Ð´ÃüÁîº¯Êý
  79          extern void initLCD12864(void);                                 //³õÊ¼»¯12864
  80          extern void LCD12864WriteData(uChar8 dat);
  81          extern void img_disp(uChar8 code *img);  //»­ÏñËØÍ¼
  82          extern void img_clear(void);             //ÇåÆÁ
  83          extern void img_line_start1(void);       //»­ÏÂ¡°¿ªÊ¼¡±´¦µÄÏÂ»®Ïß
  84          extern void img_underLine(uChar8 k);     //ÓÎÏ·½çÃæÏÂ»®Ïß¹ÜÀí
  85          extern int time;                         //Ê±¼ä
  86          extern void BMP_disp(uChar8 x, uChar8 y, uChar8 code *img);
  87          extern void keyDriver(void); 
  88          extern void LCD12864ShowString(uChar8 x, uChar8 y, uChar8* str); //µÚyÐÐµÚxÁÐ£¬¿ªÊ¼´òÓ¡str
  89          extern void LCD12864EraseArea(uChar8 x, uChar8 y, uChar8 size);  //´ÓµÚyÐÐµÚxÁÐ¿ªÊ¼£¬É¾³ýsize×Ö
  90          extern uChar8 interface;
  91          
  92          /**************************************º¯ÊýÉùÃ÷***********************************************************
             -********************/
  93          void startInterface(void);               //¿ªÊ¼½çÃæ
  94          void gameInterface(void);                //ÓÎÏ·½çÃæ
  95          void studentInterface(void);             //ÐÅÏ¢½çÃæ
  96          uChar8 judge(int x, int y, int id);
  97          void update(uChar8 a, uChar8 b);
  98          void fun(uChar8 key, uChar8 dirction);
  99          void R_right(void);
 100          void R_left(void);
 101          void R_down(void);
 102          void R_up(void);
 103          void show_hanzi(void);
 104          
 105          
 106          int cur_x, cur_y, X, dir[4][2] = { -1,0,1,0,0,-1,0,1 }, where[3][2] = { 4,6,5,6,6,6 };
 107          
 108          
 109          uChar8 code table1[] = "LCD12864";
 110          uChar8 code table2[] = "ÍÆÏä×Ó";
 111          uChar8 code table3[] = "BY AP&Yu";
 112          
 113          uChar8 index = 6;
C51 COMPILER V9.57.0.0   INTERFACE                                                         07/02/2022 17:38:09 PAGE 3   

 114          
 115          uChar8 code tmp[] = {//¿Õ¸ñ
 116          0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff
 117          };
 118          /* 0±íÊ¾¿Õ¸ñ£¬1±íÊ¾Ç½£¬2±íÊ¾ÈË£¬3±íÊ¾Ïä×Ó£¬4±íÊ¾Ä¿µÄµØ */
 119          uChar8 code mat[8][8] = {
 120          1,1,1,1,1,1,1,1,
 121          1,1,1,1,0,2,1,1,
 122          1,1,0,0,3,0,1,1,
 123          1,1,0,1,0,1,1,1,
 124          1,0,0,1,0,1,4,1,
 125          1,0,1,0,0,3,4,1,
 126          1,0,3,0,0,0,4,1,
 127          1,1,1,1,1,1,1,1
 128          };
 129          
 130          
 131          uChar8 map[8][8];
 132          
 133          uChar8 code Qiang[] = {//·½¸ñ£¬ÓÐ¼äÏ¶
 134          0xff,0x81,0x81,0x81,0x81,0x81,0x81,0xff
 135          };
 136          
 137          uChar8 code Ren[] = {//ÈË
 138          0xC3,0x81,0x24,0x00,0x24,0x3C,0x81,0xC3,
 139          };
 140          
 141          uChar8 code Xiang[] = {//Ïä×Ó  
 142          0xff,0x42,0x24,0x18,0x18,0x24,0x42,0xff
 143          };
 144          
 145          uChar8 code Mudi[] = {//Ä¿µÄµØ  
 146          0xFF,0xE7,0xE7,0x81,0x81,0xE7,0xE7,0xFF,
 147          };
 148          
 149          void init_BMP()
 150          {
 151   1        LCD12864WriteCommand(0x36);
 152   1        LCD12864WriteCommand(0x36);
 153   1        LCD12864WriteCommand(0x3E);
 154   1        LCD12864WriteCommand(0x01);
 155   1      }
 156          
 157          void display_BMP(uChar8 F, uChar8 name1, uChar8 name2, uChar8 y, uChar8 x)
 158          {
 159   1        uChar8 S, i;
 160   1        if (F == 0)S = 0x80;
 161   1        else S = 0x88;
 162   1        for (i = 0; i < 8; i++)
 163   1        {
 164   2          LCD12864WriteCommand(0x80 + i + 8 * x);//ÏÈËÍ´¹Ö±µØÖ· 
 165   2          LCD12864WriteCommand(S + y);  //ÔÙËÍË®Æ½µØÖ· ----ÏÔÊ¾Í¼Æ¬µÄÉÏ°ë²¿·Ö 
 166   2      
 167   2          if (name1 == 0)LCD12864WriteData(tmp[i]);
 168   2          else if (name1 == 1)  LCD12864WriteData(Qiang[i]);
 169   2          else if (name1 == 2)  LCD12864WriteData(Ren[i]);
 170   2          else if (name1 == 3)  LCD12864WriteData(Xiang[i]);
 171   2          else if (name1 == 4)  LCD12864WriteData(Mudi[i]);
 172   2      
 173   2          if (name2 == 0) LCD12864WriteData(tmp[i]);
 174   2          else if (name2 == 1)  LCD12864WriteData(Qiang[i]);
 175   2          else if (name2 == 2)  LCD12864WriteData(Ren[i]);
C51 COMPILER V9.57.0.0   INTERFACE                                                         07/02/2022 17:38:09 PAGE 4   

 176   2          else if (name2 == 3)  LCD12864WriteData(Xiang[i]);
 177   2          else if (name2 == 4)  LCD12864WriteData(Mudi[i]);
 178   2        }
 179   1      }
 180          
 181          void show_map() {
 182   1        uChar8 i, j, x, y;
 183   1      
 184   1        for (i = 0; i < 2; i++) {
 185   2          for (j = 0; j < 4; j++) {
 186   3            x = 2 * i; y = 2 * j;
 187   3            display_BMP(0, map[x][y], map[x][y + 1], j, 2 * i);
 188   3            x = 2 * i + 1; y = 2 * j;
 189   3            display_BMP(0, map[x][y], map[x][y + 1], j, 2 * i + 1);
 190   3          }
 191   2        }
 192   1      
 193   1        for (i = 2; i < 4; i++) {
 194   2          for (j = 0; j < 4; j++) {
 195   3            x = 2 * i; y = 2 * j;
 196   3            display_BMP(1, map[x][y], map[x][y + 1], j, 2 * (i - 2));
 197   3            x = 2 * i + 1; y = 2 * j;
 198   3            display_BMP(1, map[x][y], map[x][y + 1], j, 2 * (i - 2) + 1);
 199   3          }
 200   2        }
 201   1        
 202   1        initLCD12864();
 203   1        LCD12864ShowString(4, 0, table1);
 204   1        LCD12864ShowString(4, 1, table2);
 205   1        LCD12864ShowString(4, 2, table3);
 206   1      
 207   1      
 208   1      
 209   1      }
 210          
 211          void show_hanzi(){
 212   1        LCD12864WriteCommand(0x34);      
 213   1        LCD12864WriteCommand(0x80 + 50);   
 214   1        LCD12864WriteCommand(0x80 + 7);    
 215   1        LCD12864WriteCommand(0x30);      
 216   1        LCD12864WriteData(0x00);  
 217   1        LCD12864WriteData(0x00);
 218   1        LCD12864WriteCommand(0x36); 
 219   1        LCD12864WriteCommand(0x30);
 220   1      }
 221          
 222          void lcd_init() {
 223   1        uChar8 i, j;
 224   1      
 225   1        init_BMP();
 226   1      
 227   1        cur_x = 1; cur_y = 5;
 228   1        X = 3;
 229   1      
 230   1        for (i = 0; i < 8; i++) {
 231   2          for (j = 0; j < 8; j++)map[i][j] = mat[i][j];
 232   2        }
 233   1      }
 234          
 235          
 236          uChar8 judge(int x, int y, int id) {              //id ±íÊ¾·½ÏòÊý×éµÄÐÐ±ê£¬0,1,2,3 ·Ö±ð±íÊ¾ÉÏÏÂ×óÓÒ
 237   1        int xx, yy, xxx, yyy;
C51 COMPILER V9.57.0.0   INTERFACE                                                         07/02/2022 17:38:09 PAGE 5   

 238   1        xx = x + dir[id][0]; 
 239   1        yy = y + dir[id][1];
 240   1        if (map[xx][yy] == 0 || map[xx][yy] == 4)return 1;         //1±íÊ¾Ç°ÃæÊÇ ¿Õ¸ñ »òÕß Ä¿µÄµØ£¬¾ÍÊÇ¿ÉÒÔÖ±½ÓÒÆ¶¯
 241   1        else if (map[xx][yy] == 1)return 0;              //0±íÊ¾ÎÞ·¨ÒÆ¶¯
 242   1        else if (map[xx][yy] == 3) {
 243   2          xxx = xx + dir[id][0]; yyy = yy + dir[id][1];
 244   2          if (map[xxx][yyy] == 1 || map[xxx][yyy] == 3)return 0;
 245   2          else if (map[xxx][yyy] == 0 || map[xxx][yyy] == 4)return 2; //2±íÊ¾ÐèÒª¼ä½ÓÒÆ¶¯£¬ÏÈ°ÑÇ°ÃæµÄÏä×ÓÒÆ¶¯Ò»£¬Ô
             -ÙÈÃÈËÒÆ¶¯Ò»
 246   2        }return 0;
 247   1      }
 248          
 249          void update(uChar8 a, uChar8 b) {
 250   1        uChar8 i, j, x, y;
 251   1      
 252   1        LCD12864WriteCommand(0x3E);//8Î»(CL=1)£¬À©³äÖ¸Áî(RE=1)£¬»æÍ¼´ò¿ª(G=1) 
 253   1      
 254   1        if (a < 4) {
 255   2          i = a / 2; j = b / 2;
 256   2          x = 2 * i; y = 2 * j;
 257   2          display_BMP(0, map[x][y], map[x][y + 1], j, 2 * i);
 258   2          x = 2 * i + 1; y = 2 * j;
 259   2          display_BMP(0, map[x][y], map[x][y + 1], j, 2 * i + 1);
 260   2          
 261   2        }
 262   1        else {
 263   2          i = a / 2; j = b / 2;
 264   2          x = 2 * i; y = 2 * j;
 265   2          display_BMP(1, map[x][y], map[x][y + 1], j, 2 * (i - 2));
 266   2          x = 2 * i + 1; y = 2 * j;
 267   2          display_BMP(1, map[x][y], map[x][y + 1], j, 2 * (i - 2) + 1);
 268   2        }
 269   1      }
 270          
 271          void fun(uChar8 key, uChar8 dirction) {
 272   1        uChar8 x, y;
 273   1        // 0±íÊ¾¿Õ¸ñ£¬1±íÊ¾Ç½£¬2±íÊ¾ÈË£¬3±íÊ¾Ïä×Ó£¬4±íÊ¾Ä¿µÄµØ 
 274   1        if (key == 1) {//Ö±½ÓÒÆ¶¯
 275   2          if (mat[cur_x][cur_y] == 4)map[cur_x][cur_y] = 4;
 276   2          else map[cur_x][cur_y] = 0;
 277   2          update(cur_x, cur_y);
 278   2      
 279   2          cur_x += dir[dirction][0]; cur_y += dir[dirction][1];
 280   2          map[cur_x][cur_y] = 2;
 281   2          update(cur_x, cur_y);
 282   2      
 283   2        }
 284   1        else if (key == 2) {//¼ä½ÓÒÆ¶¯
 285   2          if (mat[cur_x][cur_y] == 4)map[cur_x][cur_y] = 4;
 286   2          else map[cur_x][cur_y] = 0;
 287   2          update(cur_x, cur_y);
 288   2      
 289   2          cur_x += dir[dirction][0]; cur_y += dir[dirction][1];
 290   2          map[cur_x][cur_y] = 2;
 291   2          update(cur_x, cur_y);
 292   2      
 293   2          x = cur_x + dir[dirction][0]; y = cur_y + dir[dirction][1];
 294   2          map[x][y] = 3;
 295   2          update(x, y);
 296   2        }
 297   1      }
 298          
C51 COMPILER V9.57.0.0   INTERFACE                                                         07/02/2022 17:38:09 PAGE 6   

 299          void startInterface(void)                //¿ªÊ¼½çÃæ
 300          {
 301   1        img_clear();  
 302   1        img_disp(start);
 303   1        img_line_start1();
 304   1        time = 50;
 305   1      }
 306          
 307          void R_up(){
 308   1        index = judge(cur_x, cur_y, 0);
 309   1        fun(index, 0);
 310   1      }
 311          void R_down(){
 312   1        index = judge(cur_x, cur_y, 1);
 313   1        fun(index, 1);
 314   1      }
 315          void R_left(){
 316   1        index = judge(cur_x, cur_y, 2);
 317   1        fun(index, 2);
 318   1      }
 319          void R_right(){
 320   1        index = judge(cur_x, cur_y, 3);
 321   1        fun(index, 3);
 322   1      }
 323          
 324          
 325          
 326          void gameInterface(void)                 //ÓÎÏ·½çÃæ
 327          { 
 328   1        uChar8 i, num;
 329   1        uChar8 string[8];
 330   1        img_clear();
 331   1        IE2 |= 0x04; 
 332   1        lcd_init();
 333   1        show_map(); 
 334   1        show_hanzi();
 335   1           
 336   1        while (1) {
 337   2          num = 0;
 338   2          for (i = 0; i < 3; i++) {
 339   3            if (map[where[i][0]][where[0][1]] == 3)num++;
 340   3            else break;
 341   3          }
 342   2          if (num == X)goto WIN;
 343   2          keyDriver();
 344   2          
 345   2        }
 346   1      WIN:
 347   1        //initLCD12864();
 348   1        LCD12864WriteCommand(0x38);
 349   1        LCD12864WriteCommand(0x0C);
 350   1        LCD12864WriteCommand(0x06);
 351   1        IE2 = 0x00;                  //¹Ø±Õ¶¨Ê±Æ÷2
 352   1        sprintf(string, "µÃ·Ö:%03d", time);
 353   1        LCD12864ShowString(4, 2, string);
 354   1        sprintf(string, "YOU WIN!", time);
 355   1        LCD12864ShowString(4, 3, string); 
 356   1        interface=2;
 357   1        while(1){
 358   2          keyDriver();
 359   2        }
 360   1        
C51 COMPILER V9.57.0.0   INTERFACE                                                         07/02/2022 17:38:09 PAGE 7   

 361   1      }
 362          
 363          void studentInterface(void)              //ÐÅÏ¢½çÃæ
 364          {
 365   1        uChar8 tab1[] = "Îâ**";
 366   1        uChar8 tab2[] = "3**20520518**";
 367   1        uChar8 tab3[] = "Öì**";
 368   1        uChar8 tab4[] = "3**20520518**";
 369   1        img_clear();                         //ÇåÆÁ
 370   1        LCD12864ShowString(0, 0, tab1);
 371   1        LCD12864ShowString(0, 1, tab2);
 372   1        LCD12864ShowString(0, 2, tab3);
 373   1        LCD12864ShowString(0, 3, tab4);
 374   1      }
 375          
 376          
 377          
 378          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   2820    ----
   CONSTANT SIZE    =   1210    ----
   XDATA SIZE       =     99      77
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
